<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Grammar - Nix Types - a first step in the right direction</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../theme/highlight-dark.css">
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../intro.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../getting-started.html"><strong aria-hidden="true">2.</strong> Getting started</a></li><li class="chapter-item expanded "><a href="../specification/formals.html"><strong aria-hidden="true">3.</strong> Formals</a></li><li class="chapter-item expanded "><a href="../specification/grammar.html" class="active"><strong aria-hidden="true">4.</strong> Grammar</a></li><li class="chapter-item expanded "><a href="../specification/types.html"><strong aria-hidden="true">5.</strong> Types</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../specification/basic.html"><strong aria-hidden="true">5.1.</strong> Primitives</a></li><li class="chapter-item expanded "><a href="../specification/complex.html"><strong aria-hidden="true">5.2.</strong> Complex</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../specification/list.html"><strong aria-hidden="true">5.2.1.</strong> List</a></li><li class="chapter-item expanded "><a href="../specification/attrset.html"><strong aria-hidden="true">5.2.2.</strong> AttrSet</a></li><li class="chapter-item expanded "><a href="../specification/lambda.html"><strong aria-hidden="true">5.2.3.</strong> Lambda</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../specification/operators.html"><strong aria-hidden="true">6.</strong> Operators</a></li><li class="chapter-item expanded "><a href="../specification/type-variables.html"><strong aria-hidden="true">7.</strong> Type Variables</a></li><li class="chapter-item expanded "><a href="../nix/index.html"><strong aria-hidden="true">8.</strong> Nix primitive types</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../nix/operations.html"><strong aria-hidden="true">8.1.</strong> Operations</a></li><li class="chapter-item expanded "><a href="../nix/builtins.html"><strong aria-hidden="true">8.2.</strong> Builtins</a></li></ol></li><li class="chapter-item expanded "><a href="../specification/usage.html"><strong aria-hidden="true">9.</strong> Usage</a></li><li class="chapter-item expanded "><a href="../use-case.html"><strong aria-hidden="true">10.</strong> Use-cases</a></li><li class="chapter-item expanded "><a href="../contributors.html"><strong aria-hidden="true">11.</strong> Contributors</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Nix Types - a first step in the right direction</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://gitlab.com/hsjobeki/nix-types" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-code-fork"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="tokens"><a class="header" href="#tokens">Tokens</a></h1>
<h2 id="the-following-tokens-do-exist"><a class="header" href="#the-following-tokens-do-exist">The following tokens do exist</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Token</th><th>Name</th><th>Purpose</th></tr></thead><tbody>
<tr><td>{}</td><td>Left / Right Braces</td><td>Set Types; Interpolation together with the $-Token;</td></tr>
<tr><td>[]</td><td>Left / Right Brackets</td><td>List Types</td></tr>
<tr><td>()</td><td>Left / Right Parens</td><td>Structure Types,override precedence</td></tr>
<tr><td>@</td><td>At</td><td>Binding Typed values to names</td></tr>
<tr><td>::</td><td>Double Colon</td><td>Declares the type (RHS) of name (LHS)</td></tr>
<tr><td>.</td><td>Dot</td><td>Used to create explicit float values; Usage for accessing child properties in sets is not yet implemented. Some usage example: <code>0.1</code> <code>.5e-9</code> <code>5.e2</code> (This is just native nix)</td></tr>
<tr><td>?</td><td>Question</td><td>Optional properties of sets</td></tr>
<tr><td>;</td><td>Semicolon</td><td>Terminate set entries</td></tr>
<tr><td>-&gt;</td><td>Implication</td><td>Define Lambdas e.g. Int -&gt; String</td></tr>
<tr><td>//</td><td>Update</td><td>Update Attribute Set Types. Can be used to partially update and insert name-value-types</td></tr>
<tr><td>-</td><td>Sub</td><td>Used for explicit negative numbers (-2.0), subtraction is NOT supported (e.g 3 - 1)</td></tr>
<tr><td>&lt;&gt;</td><td>Path</td><td>Define valid paths as explicit values</td></tr>
<tr><td>|</td><td>Pipe</td><td>Create Type-Unions e.g. Int | Float</td></tr>
<tr><td>${}</td><td>Interpolation</td><td>Used for naming / referring to dynamic names</td></tr>
<tr><td>&quot;</td><td>String body (single-line)</td><td>explicit string values</td></tr>
<tr><td>''</td><td>String body (multi-line)</td><td>explicit string values</td></tr>
<tr><td><code>[0-9]*</code></td><td>Integer</td><td>explicit integer values</td></tr>
</tbody></table>
</div>
<h3 id="tokens-removed"><a class="header" href="#tokens-removed">Tokens removed</a></h3>
<p>In contrast to the default nix language, some tokens do not exist and may even result in an error.</p>
<div class="table-wrapper"><table><thead><tr><th>Token</th><th>Name</th><th>Purpose</th></tr></thead><tbody>
<tr><td>,</td><td>Comma</td><td>Originally used for separation in lambda-patterns, replaced by ; (Semicolon)</td></tr>
<tr><td>:</td><td>Colon</td><td>Originally used for lambda, patterns; in Type context replaced by -&gt;</td></tr>
<tr><td>=</td><td>Assign</td><td>Does not exists, use :: (Double Colon) to declare</td></tr>
<tr><td>++</td><td>Concat</td><td>Does not exists, use | (Pipe) to create list unions</td></tr>
<tr><td>/</td><td>Div</td><td>Not used</td></tr>
<tr><td>/**/</td><td>Multiline Comment</td><td>Not used</td></tr>
<tr><td>+</td><td>Add</td><td>Not used</td></tr>
<tr><td>*</td><td>Mul</td><td>Not used</td></tr>
<tr><td>&amp;&amp;</td><td>And</td><td>not used</td></tr>
<tr><td>||</td><td>Or</td><td>not used, use single | (Pipe)</td></tr>
<tr><td>&lt; &lt;=, =&gt;, &gt;</td><td>Less, Less or equal, More or equal, More</td><td>comparison not used</td></tr>
</tbody></table>
</div>
<h2 id="the-following-keywords-do-exist"><a class="header" href="#the-following-keywords-do-exist">The following keywords do exist</a></h2>
<p>Only the <code>let .. in</code> keywords are supported.</p>
<div class="table-wrapper"><table><thead><tr><th>Keyword</th><th>Purpose</th></tr></thead><tbody>
<tr><td>let</td><td>declaration block</td></tr>
<tr><td>in</td><td>what is yielded</td></tr>
</tbody></table>
</div>
<h2 id="keywords-removed"><a class="header" href="#keywords-removed">Keywords removed</a></h2>
<p>As complexity is already quite high. It is considered best to not support the following keywords in the type language.</p>
<div class="table-wrapper"><table><thead><tr><th>Keyword</th><th></th></tr></thead><tbody>
<tr><td>assert</td><td></td></tr>
<tr><td>if</td><td></td></tr>
<tr><td>else</td><td></td></tr>
<tr><td>then</td><td></td></tr>
<tr><td>inherit</td><td></td></tr>
<tr><td>or</td><td></td></tr>
<tr><td>rec</td><td></td></tr>
<tr><td>with</td><td></td></tr>
</tbody></table>
</div>
<h3 id="reserved-types"><a class="header" href="#reserved-types">Reserved Types</a></h3>
<p>All types are written in Uppercase by convention to visually distinguish them from variables and actual values.</p>
<p>Some composed types are handled as native types as well. They are well-defined internally but can be used natively in the type language.</p>
<div class="table-wrapper"><table><thead><tr><th>Keyword</th></tr></thead><tbody>
<tr><td>Bool</td></tr>
<tr><td>Int</td></tr>
<tr><td>Float</td></tr>
<tr><td>String</td></tr>
<tr><td>Path</td></tr>
<tr><td>Null</td></tr>
<tr><td>Number</td></tr>
<tr><td>Derivation</td></tr>
</tbody></table>
</div>
<h2 id="_internal-context"><a class="header" href="#_internal-context">_Internal context</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Context</th><th>Purpose</th></tr></thead><tbody>
<tr><td>MultilineCommentBody</td><td>Initial Context, every character is just the content of the comment.</td></tr>
<tr><td>TypeBlock</td><td>Started by <code>{whitespace}Type:</code>; Every following character is tokenized with the type grammar.</td></tr>
<tr><td>ExampleBlock</td><td>Started by <code>{whitespace}Example:</code>; Everything followed is just a comment string content. Token may not be needed?</td></tr>
<tr><td>StringBody; StringEnd; Interpol; InterpolStart; Path</td><td>Regular nix tokenization context</td></tr>
</tbody></table>
</div>
<h2 id="syntax"><a class="header" href="#syntax">Syntax</a></h2>
<p>-- under construction --</p>
<p>The syntax very closely follows the Nix syntax to make writing types intuitive for Nix users. Although the language is inspired by Haskell, not every Nix user may be familiar with Haskell.</p>
<h3 id="legacy-let"><a class="header" href="#legacy-let">Legacy let</a></h3>
<p>Did you know the <code>legacy let</code>? Don't bother it is legacy ^^ ;-). Legacy let is not supported by the type language.
In general, every type is defined in a type expression.</p>
<p>e.g.</p>
<pre><code class="language-hs">Int | Bool
</code></pre>
<p>is a type expression; - but also</p>
<pre><code class="language-hs">let
Foo :: Int;
in
Foo | Bool
</code></pre>
<p>Those two examples contain essentially almost every rule for writing type expressions.</p>
<p>As shown in general there are two levels of type expression.</p>
<ul>
<li>Type-expression</li>
<li>Simple Type-expression</li>
</ul>
<p>The everything is a <code>Type Expression</code> but in certain places you can only write <code>simple type expression</code>. This behavior is not invented with the type language; it is derived from nix.
Where the same principles apply.</p>
<p>For example Simple type expressions do not ally writing <code>let ... in</code>.</p>
<pre><code class="language-hs">[ let T :: Int in T ]
</code></pre>
<p>is just NOT allowed.
There are certain places within the syntax where you can only write simple expressions such as:</p>
<pre><code class="language-hs">[ {SIMPLE} ] -&gt; [ Int | String ]
</code></pre>
<h2 id="root-ident"><a class="header" href="#root-ident">Root Ident</a></h2>
<p>Currently, there are many so-called root ident nodes.</p>
<p>Example:</p>
<pre><code class="language-nix">    mapAttrs :: (String -&gt; Any -&gt; Any) -&gt; AttrSet -&gt; AttrSet
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../specification/formals.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../specification/types.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../specification/formals.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../specification/types.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
